<!DOCTYPE html>
<html lang="en">
  <%- include('template/header') %>
  <body class="h-screen flex flex-col">
    <%- include('template/navbar') %> <%- include('template/sidbar') %>

    <div
      class="pt-4 sm:ml-64 flex-grow flex flex-col bg-gray-50 dark:bg-gray-800"
    >
      <div class="rounded mt-14 flex flex-col items-end"></div>

      <div
        class="mb-4 border-b border-gray-200 dark:border-gray-700 shadow-lg bg-white"
      >
        <ul
          class="flex flex-wrap -mb-px text-sm font-medium text-center"
          id="default-styled-tab"
          data-tabs-toggle="#default-styled-tab-content"
          data-tabs-active-classes="text-blue-700 hover:text-blue-700 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500"
          data-tabs-inactive-classes="dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300"
          role="tablist"
        >
          <li class="w-1/2" role="presentation">
            <button
              class="inline-block p-4 border-b-2 rounded-t-lg flex items-center w-full justify-center font-bold"
              id="profile-styled-tab"
              data-tabs-target="#styled-profile"
              type="button"
              role="tab"
              aria-controls="profile"
              aria-selected="false"
            >
              <svg
                fill="#000000"
                class="w-4 h-4 me-2 text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-300"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M23,12A11,11,0,0,1,4.963,20.451l-.256.256A1,1,0,0,1,4,21a.987.987,0,0,1-.383-.076A1,1,0,0,1,3,20V18a1,1,0,0,1,1-1H6a1,1,0,0,1,.707,1.707l-.322.322A9,9,0,1,0,3,12a9.107,9.107,0,0,0,.18,1.8,1,1,0,0,1-1.96.4A11,11,0,1,1,23,12ZM12,5a1,1,0,0,0-1,1v6a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2H13V6A1,1,0,0,0,12,5Z"
                  ></path>
                </g>
              </svg>
              En attente
            </button>
          </li>
          <li class="w-1/2" role="presentation">
            <button
              class="inline-block p-4 border-b-2 rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 flex items-center w-full justify-center font-bold"
              id="dashboard-styled-tab"
              data-tabs-target="#styled-dashboard"
              type="button"
              role="tab"
              aria-controls="dashboard"
              aria-selected="false"
            >
              <svg
                viewBox="0 0 16 16"
                class="w-4 h-4 me-2 text-gray-400 group-hover:text-gray-500 dark:text-gray-500 dark:group-hover:text-gray-300"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                fill="#000000"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    fill="#444"
                    d="M4 0v6h1.7l0.2 0.7 0.2 0.6c0 0 0.1 0 0.1 0l1.2-0.6 1.8 1.8-0.6 1.2c0 0 0 0.1 0 0.1l0.6 0.2 0.7 0.2v0.2l6.1-3.4-12-7z"
                  ></path>
                  <path
                    fill="#444"
                    d="M4.5 10.5c-0.2 0-0.4 0.1-0.5 0.2-0.3 0.2-0.5 0.5-0.5 0.8s0.2 0.7 0.5 0.8c0.1 0.1 0.3 0.2 0.5 0.2 0.6 0 1-0.4 1-1s-0.4-1-1-1z"
                  ></path>
                  <path
                    fill="#444"
                    d="M9 12v-1l-1.1-0.4c-0.1-0.3-0.2-0.6-0.4-0.9l0.5-1-0.7-0.7-1 0.5c-0.3-0.2-0.6-0.3-0.9-0.4l-0.4-1.1h-1l-0.4 1.1c-0.3 0.1-0.6 0.2-0.9 0.4l-1-0.5-0.7 0.7 0.5 1.1c-0.2 0.3-0.3 0.6-0.4 0.9l-1.1 0.3v1l1.1 0.4c0.1 0.3 0.2 0.6 0.4 0.9l-0.5 1 0.7 0.7 1.1-0.5c0.3 0.2 0.6 0.3 0.9 0.4l0.3 1.1h1l0.4-1.1c0.3-0.1 0.6-0.2 0.9-0.4l1 0.5 0.7-0.7-0.5-1.1c0.2-0.3 0.3-0.6 0.4-0.9l1.1-0.3zM4.5 13.5c-1.1 0-2-0.9-2-2s0.9-2 2-2 2 0.9 2 2c0 1.1-0.9 2-2 2z"
                  ></path>
                </g>
              </svg>
              En cours
            </button>
          </li>
        </ul>
      </div>
      <div id="default-styled-tab-content">
        <div
          class="hidden p-4 rounded-lg dark:bg-gray-800 flex flex-col items-center space-y-3"
          id="styled-profile"
          role="tabpanel"
          aria-labelledby="profile-tab"
        ></div>
        <div
          class="hidden p-4 rounded-lg"
          id="styled-dashboard"
          role="tabpanel"
          aria-labelledby="dashboard-tab"
        >
          <p class="text-sm text-gray-500 dark:text-gray-400">
            This is some placeholder content the
            <strong class="font-medium text-gray-800 dark:text-white"
              >Dashboard tab's associated content</strong
            >. Clicking another tab will toggle the visibility of this one for
            the next. The tab JavaScript swaps classes to control the content
            visibility and styling.
          </p>
        </div>
      </div>
    </div>
    <div class="fixed bottom-4 right-4">
      <button
        data-modal-target="create-session"
        data-modal-toggle="create-session"
        class="bg-blue-800 hover:bg-blue-900 text-gray-100 font-bold py-2 px-4 rounded-full shadow-lg"
      >
        Nouvelle session
      </button>
    </div>

    <!-- Modalll--------------------------------- -->
    <!-- Modal new game -->
    <div
      id="create-session"
      tabindex="-1"
      aria-hidden="true"
      class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"
    >
      <div class="relative p-4 w-full max-w-md max-h-full">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
          <!-- Modal header -->
          <div
            class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
              Nouvelle session
            </h3>
            <button
              type="button"
              id="close-create-session"
              class="end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
              data-modal-hide="create-session"
            >
              <svg
                class="w-3 h-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 14 14"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
                />
              </svg>
              <span class="sr-only">Close modal</span>
            </button>
          </div>
          <!-- Modal body -->
          <div class="p-4 md:p-5">
            <form class="space-y-4" id="new-session" action="#">
              <input type="hidden" name="creator" value="<%= user._id %>" />
              <div>
                <label
                  for="nb_players"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Nombre de jouers</label
                >
                <select
                  name="nb_players"
                  id="nb_players"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                  required
                >
                  <option value="1" selected>1 joueur</option>
                  <option value="2">2 joueurs</option>
                  <option value="3">3 joueurs</option>
                  <option value="4">4 joueurs</option>
                </select>
              </div>
              <div>
                <label
                  for="nb_parties"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Nombre de parties</label
                >
                <input
                  type="number"
                  name="nb_parties"
                  id="nb_parties"
                  placeholder="1"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                  required
                />
              </div>

              <div>
                <label
                  for="timer"
                  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                  >Temps coup</label
                >
                <input
                  type="number"
                  name="timer"
                  id="timer"
                  placeholder="30s"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white"
                  required
                />
              </div>

              <button
                type="submit"
                class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
              >
                Creer
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Main modal -->

    <div id="modals"></div>

    <%- include('template/scripts') %>
    <script>
      const itemSession = (session) => {
        return `
            <a
            class="flex space-x-3 items-center bg-white p-2 rounded-lg shadow-lg w-full md:w-[500px]"
            href="#"
            id="${session?._id}"
          >
            <img src="/images/user.png" class="rounded-full h-16" alt="" />
            <div class="space-y-2 w-full">
              <div class="font-bold">${session?.creator?.username}</div>
              <div class="flex items-center w-full space-x-8">
                <div class="flex items-center space-x-1">
                  <svg
                    height="200px"
                    width="200px"
                    version="1.1"
                    id="Layer_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 0 503.467 503.467"
                    xml:space="preserve"
                    class="h-5 w-5"
                    fill="#000000"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <g transform="translate(1 1)">
                        <g>
                          <path
                            style="fill: #ecf4f7"
                            d="M476.236,191c17.92,6.827,26.453,25.6,20.48,43.52l-87.893,240.64 c-6.827,17.92-25.6,26.453-43.52,20.48l-240.64-87.893c-17.92-6.827-27.307-26.453-20.48-43.52l16.213-36.693l173.227-0.853 c18.773,0,34.133-15.36,34.133-34.133V135.534L476.236,191z"
                          ></path>
                          <path
                            style="fill: #ecf4f7"
                            d="M327.756,136.387V293.4c0,18.773-15.36,34.133-34.133,34.133h-58.88h-43.52h-70.827H37.623 c-18.773,0-34.133-15.36-34.133-34.133v-256c0-18.773,15.36-34.133,34.133-34.133h256c18.773,0,34.133,15.36,34.133,34.133 V136.387z"
                          ></path>
                        </g>
                        <path
                          style="fill: #aab1ba"
                          d="M396.023,235.373c13.653,5.12,20.48,19.627,15.36,33.28c-5.12,13.653-19.627,20.48-32.427,15.36 c-13.653-5.12-20.48-19.627-15.36-32.427C368.716,237.08,383.223,230.253,396.023,235.373z M349.943,363.373 c13.653,5.12,20.48,19.627,15.36,32.427c-5.12,13.653-19.627,20.48-32.427,15.36c-13.653-5.12-20.48-19.627-15.36-33.28 C321.783,365.08,336.29,358.253,349.943,363.373z M250.956,54.467c14.507,0,25.6,11.093,25.6,25.6s-11.093,25.6-25.6,25.6 c-14.507,0-25.6-11.093-25.6-25.6S236.45,54.467,250.956,54.467z M250.956,225.133c14.507,0,25.6,11.093,25.6,25.6 c0,14.507-11.093,25.6-25.6,25.6c-14.507,0-25.6-11.093-25.6-25.6C225.356,236.227,236.45,225.133,250.956,225.133z M234.743,327.533c2.56,4.267,4.267,8.533,4.267,13.653c0,14.507-11.093,25.6-25.6,25.6c-14.507,0-25.6-11.093-25.6-25.6 c0-5.12,1.707-9.387,4.267-13.653H234.743z M165.623,139.8c14.507,0,25.6,11.093,25.6,25.6s-11.093,25.6-25.6,25.6 c-14.507,0-25.6-11.093-25.6-25.6S151.116,139.8,165.623,139.8z M80.29,54.467c14.507,0,25.6,11.093,25.6,25.6 s-11.093,25.6-25.6,25.6s-25.6-11.093-25.6-25.6S65.783,54.467,80.29,54.467z M80.29,225.133c14.507,0,25.6,11.093,25.6,25.6 c0,14.507-11.093,25.6-25.6,25.6s-25.6-11.093-25.6-25.6C54.69,236.227,65.783,225.133,80.29,225.133z"
                        ></path>
                      </g>
                      <path
                        style="fill: #51565f"
                        d="M377.396,503.467c-4.267,0-8.533-0.853-12.8-2.56l-240.64-87.04 c-19.627-6.827-29.867-29.013-23.04-49.493l4.267-11.093c0.853-2.56,3.413-3.413,5.12-2.56c2.56,0.853,3.413,3.413,2.56,5.12 l-4.267,11.093c-5.973,15.36,2.56,32.427,17.92,38.4l240.64,87.893c15.36,5.973,32.427-2.56,38.4-17.92l87.893-240.64 c5.973-15.36-2.56-32.427-17.92-38.4l-122.88-44.373c-2.56-0.853-3.413-3.413-2.56-5.12c0.853-2.56,3.413-3.413,5.12-2.56 l122.88,44.373c19.627,6.827,29.867,29.013,23.04,49.493l-87.893,240.64C408.116,494.08,393.61,503.467,377.396,503.467z M342.41,418.133c-3.413,0-6.827-0.853-10.24-1.707c-7.68-2.56-13.653-8.533-17.067-15.36c-3.413-6.827-3.413-15.36-0.853-23.04 c5.973-15.36,23.04-23.893,38.4-17.92l0,0c15.36,5.973,23.893,23.04,17.92,38.4C365.45,410.453,354.356,418.133,342.41,418.133z M342.41,366.933c-3.413,0-5.973,0.853-9.387,1.707c-5.12,2.56-9.387,6.827-11.093,11.947s-1.707,11.093,0.853,16.213 s6.827,9.387,11.947,11.093c11.093,4.267,23.04-1.707,27.307-12.8s-1.707-23.04-12.8-27.307l0,0 C346.676,367.787,344.116,366.933,342.41,366.933z M213.556,372.053c-3.413,0-6.827-0.853-10.24-1.707 c-6.827-2.56-11.947-7.68-16.213-13.653c-0.853-1.707,0-4.267,1.707-5.973c1.707-0.853,4.267,0,5.973,1.707 c2.56,4.267,6.827,7.68,11.093,9.387c10.24,3.413,20.48-0.853,25.6-9.387c0.853-1.707,3.413-2.56,5.973-1.707 c1.707,0.853,2.56,3.413,1.707,5.973C234.036,366.08,224.65,372.053,213.556,372.053z M294.623,332.8h-256 c-21.333,0-38.4-17.067-38.4-38.4v-256C0.223,17.067,17.29,0,38.623,0h256c21.333,0,38.4,17.067,38.4,38.4v256 C333.023,315.733,315.956,332.8,294.623,332.8z M38.623,8.533C22.41,8.533,8.756,22.187,8.756,38.4v256 c0,16.213,13.653,29.867,29.867,29.867h256c16.213,0,29.867-13.653,29.867-29.867v-256c0-16.213-13.653-29.867-29.867-29.867H38.623 z M388.49,290.133c-3.413,0-6.827-0.853-10.24-1.707c-15.36-5.973-23.893-23.04-17.92-38.4c2.56-7.68,8.533-13.653,15.36-17.067 c6.827-3.413,15.36-3.413,23.04-0.853c7.68,2.56,13.653,8.533,17.067,15.36c3.413,6.827,3.413,15.36,0.853,23.04 c-2.56,7.68-8.533,13.653-15.36,17.067C397.023,289.28,392.756,290.133,388.49,290.133z M388.49,238.933 c-3.413,0-5.973,0.853-9.387,1.707c-5.12,2.56-9.387,6.827-11.093,11.947s-1.707,11.093,0.853,16.213s6.827,9.387,11.947,11.093 c5.12,1.707,11.093,1.707,16.213-0.853c5.12-2.56,9.387-6.827,11.093-11.947c1.707-5.12,1.707-11.093-0.853-16.213 c-2.56-5.12-6.827-9.387-11.947-11.093l0,0C393.61,238.933,391.05,238.933,388.49,238.933z M251.956,281.6 c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867s29.867,13.653,29.867,29.867S268.17,281.6,251.956,281.6z M251.956,230.4c-11.947,0-21.333,9.387-21.333,21.333c0,11.947,9.387,21.333,21.333,21.333c11.947,0,21.333-9.387,21.333-21.333 C273.29,239.787,263.903,230.4,251.956,230.4z M81.29,281.6c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867 s29.867,13.653,29.867,29.867S97.503,281.6,81.29,281.6z M81.29,230.4c-11.947,0-21.333,9.387-21.333,21.333 c0,11.947,9.387,21.333,21.333,21.333s21.333-9.387,21.333-21.333C102.623,239.787,93.236,230.4,81.29,230.4z M166.623,196.267 c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867s29.867,13.653,29.867,29.867S182.836,196.267,166.623,196.267z M166.623,145.067c-11.947,0-21.333,9.387-21.333,21.333s9.387,21.333,21.333,21.333s21.333-9.387,21.333-21.333 S178.57,145.067,166.623,145.067z M251.956,110.933c-16.213,0-29.867-13.653-29.867-29.867S235.743,51.2,251.956,51.2 s29.867,13.653,29.867,29.867S268.17,110.933,251.956,110.933z M251.956,59.733c-11.947,0-21.333,9.387-21.333,21.333 s9.387,21.333,21.333,21.333c11.947,0,21.333-9.387,21.333-21.333S263.903,59.733,251.956,59.733z M81.29,110.933 c-16.213,0-29.867-13.653-29.867-29.867S65.076,51.2,81.29,51.2s29.867,13.653,29.867,29.867S97.503,110.933,81.29,110.933z M81.29,59.733c-11.947,0-21.333,9.387-21.333,21.333S69.343,102.4,81.29,102.4s21.333-9.387,21.333-21.333 S93.236,59.733,81.29,59.733z"
                      ></path>
                    </g>
                  </svg>
                  <span>x${session?.nb_parties}</span>
                </div>
    
                <div class="flex items-center space-x-1">
                  <svg
                    fill="#000000"
                    viewBox="0 0 24 24"
                    id="timer-7-second"
                    data-name="Flat Line"
                    xmlns="http://www.w3.org/2000/svg"
                    class="icon flat-line h-5 w-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <circle
                        id="secondary"
                        cx="12"
                        cy="13.5"
                        r="7.5"
                        style="fill: #2ca9bc; stroke-width: 2"
                      ></circle>
                      <polyline
                        id="primary"
                        points="10.6 15.57 12 14 12 10"
                        style="
                          fill: none;
                          stroke: #000000;
                          stroke-linecap: round;
                          stroke-linejoin: round;
                          stroke-width: 2;
                        "
                      ></polyline>
                      <path
                        id="primary-2"
                        data-name="primary"
                        d="M6.7,8.2,5.2,6.7M17.3,8.2l1.5-1.5M12,3V6m3-3H9m3,3a7.5,7.5,0,1,0,7.5,7.5A7.5,7.5,0,0,0,12,6Z"
                        style="
                          fill: none;
                          stroke: #000000;
                          stroke-linecap: round;
                          stroke-linejoin: round;
                          stroke-width: 2;
                        "
                      ></path>
                    </g>
                  </svg>
                  <span>${session?.timer}s</span>
                </div>
    
                <div class="flex itms-center space-x-1">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M15.5 7.5C15.5 9.433 13.933 11 12 11C10.067 11 8.5 9.433 8.5 7.5C8.5 5.567 10.067 4 12 4C13.933 4 15.5 5.567 15.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M19.5 7.5C19.5 8.88071 18.3807 10 17 10C15.6193 10 14.5 8.88071 14.5 7.5C14.5 6.11929 15.6193 5 17 5C18.3807 5 19.5 6.11929 19.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M4.5 7.5C4.5 8.88071 5.61929 10 7 10C8.38071 10 9.5 8.88071 9.5 7.5C9.5 6.11929 8.38071 5 7 5C5.61929 5 4.5 6.11929 4.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        d="M18 16.5C18 18.433 15.3137 20 12 20C8.68629 20 6 18.433 6 16.5C6 14.567 8.68629 13 12 13C15.3137 13 18 14.567 18 16.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M22 16.5C22 17.8807 20.2091 19 18 19C15.7909 19 14 17.8807 14 16.5C14 15.1193 15.7909 14 18 14C20.2091 14 22 15.1193 22 16.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M2 16.5C2 17.8807 3.79086 19 6 19C8.20914 19 10 17.8807 10 16.5C10 15.1193 8.20914 14 6 14C3.79086 14 2 15.1193 2 16.5Z"
                        fill="#1C274C"
                      ></path>
                    </g>
                  </svg>
                  <span>x${session?.nb_players}</span>
                </div>
              </div>
            </div>
          </a>
        `;
      };

      const itemModal = (session) => {
        return `
        <div
      id="modal-${session?._id}"
      tabindex="-1"
      aria-hidden="true"
      class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"
    >
      <div class="relative p-4 w-full max-w-md max-h-full">
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
          <div
            class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"
          >
            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
              Rejoindre la session
            </h3>
            <button
              type="button"
              class="end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
              data-modal-hide="modal-${session?._id}"
            >
              <svg
                class="w-3 h-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 14 14"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
                />
              </svg>
              <span class="sr-only">Close modal</span>
            </button>
          </div>
          <!-- Modal body -->
          <div class="p-2 md:p-3">
            <div class="border-b pb-2 space-y-2 text-sm">
              <div class="flex items-center w-full justify-between">
                <div class="flex items-center space-x-1">
                  <svg
                    height="200px"
                    width="200px"
                    version="1.1"
                    id="Layer_1"
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    viewBox="0 0 503.467 503.467"
                    xml:space="preserve"
                    class="h-5 w-5"
                    fill="#000000"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <g transform="translate(1 1)">
                        <g>
                          <path
                            style="fill: #ecf4f7"
                            d="M476.236,191c17.92,6.827,26.453,25.6,20.48,43.52l-87.893,240.64 c-6.827,17.92-25.6,26.453-43.52,20.48l-240.64-87.893c-17.92-6.827-27.307-26.453-20.48-43.52l16.213-36.693l173.227-0.853 c18.773,0,34.133-15.36,34.133-34.133V135.534L476.236,191z"
                          ></path>
                          <path
                            style="fill: #ecf4f7"
                            d="M327.756,136.387V293.4c0,18.773-15.36,34.133-34.133,34.133h-58.88h-43.52h-70.827H37.623 c-18.773,0-34.133-15.36-34.133-34.133v-256c0-18.773,15.36-34.133,34.133-34.133h256c18.773,0,34.133,15.36,34.133,34.133 V136.387z"
                          ></path>
                        </g>
                        <path
                          style="fill: #aab1ba"
                          d="M396.023,235.373c13.653,5.12,20.48,19.627,15.36,33.28c-5.12,13.653-19.627,20.48-32.427,15.36 c-13.653-5.12-20.48-19.627-15.36-32.427C368.716,237.08,383.223,230.253,396.023,235.373z M349.943,363.373 c13.653,5.12,20.48,19.627,15.36,32.427c-5.12,13.653-19.627,20.48-32.427,15.36c-13.653-5.12-20.48-19.627-15.36-33.28 C321.783,365.08,336.29,358.253,349.943,363.373z M250.956,54.467c14.507,0,25.6,11.093,25.6,25.6s-11.093,25.6-25.6,25.6 c-14.507,0-25.6-11.093-25.6-25.6S236.45,54.467,250.956,54.467z M250.956,225.133c14.507,0,25.6,11.093,25.6,25.6 c0,14.507-11.093,25.6-25.6,25.6c-14.507,0-25.6-11.093-25.6-25.6C225.356,236.227,236.45,225.133,250.956,225.133z M234.743,327.533c2.56,4.267,4.267,8.533,4.267,13.653c0,14.507-11.093,25.6-25.6,25.6c-14.507,0-25.6-11.093-25.6-25.6 c0-5.12,1.707-9.387,4.267-13.653H234.743z M165.623,139.8c14.507,0,25.6,11.093,25.6,25.6s-11.093,25.6-25.6,25.6 c-14.507,0-25.6-11.093-25.6-25.6S151.116,139.8,165.623,139.8z M80.29,54.467c14.507,0,25.6,11.093,25.6,25.6 s-11.093,25.6-25.6,25.6s-25.6-11.093-25.6-25.6S65.783,54.467,80.29,54.467z M80.29,225.133c14.507,0,25.6,11.093,25.6,25.6 c0,14.507-11.093,25.6-25.6,25.6s-25.6-11.093-25.6-25.6C54.69,236.227,65.783,225.133,80.29,225.133z"
                        ></path>
                      </g>
                      <path
                        style="fill: #51565f"
                        d="M377.396,503.467c-4.267,0-8.533-0.853-12.8-2.56l-240.64-87.04 c-19.627-6.827-29.867-29.013-23.04-49.493l4.267-11.093c0.853-2.56,3.413-3.413,5.12-2.56c2.56,0.853,3.413,3.413,2.56,5.12 l-4.267,11.093c-5.973,15.36,2.56,32.427,17.92,38.4l240.64,87.893c15.36,5.973,32.427-2.56,38.4-17.92l87.893-240.64 c5.973-15.36-2.56-32.427-17.92-38.4l-122.88-44.373c-2.56-0.853-3.413-3.413-2.56-5.12c0.853-2.56,3.413-3.413,5.12-2.56 l122.88,44.373c19.627,6.827,29.867,29.013,23.04,49.493l-87.893,240.64C408.116,494.08,393.61,503.467,377.396,503.467z M342.41,418.133c-3.413,0-6.827-0.853-10.24-1.707c-7.68-2.56-13.653-8.533-17.067-15.36c-3.413-6.827-3.413-15.36-0.853-23.04 c5.973-15.36,23.04-23.893,38.4-17.92l0,0c15.36,5.973,23.893,23.04,17.92,38.4C365.45,410.453,354.356,418.133,342.41,418.133z M342.41,366.933c-3.413,0-5.973,0.853-9.387,1.707c-5.12,2.56-9.387,6.827-11.093,11.947s-1.707,11.093,0.853,16.213 s6.827,9.387,11.947,11.093c11.093,4.267,23.04-1.707,27.307-12.8s-1.707-23.04-12.8-27.307l0,0 C346.676,367.787,344.116,366.933,342.41,366.933z M213.556,372.053c-3.413,0-6.827-0.853-10.24-1.707 c-6.827-2.56-11.947-7.68-16.213-13.653c-0.853-1.707,0-4.267,1.707-5.973c1.707-0.853,4.267,0,5.973,1.707 c2.56,4.267,6.827,7.68,11.093,9.387c10.24,3.413,20.48-0.853,25.6-9.387c0.853-1.707,3.413-2.56,5.973-1.707 c1.707,0.853,2.56,3.413,1.707,5.973C234.036,366.08,224.65,372.053,213.556,372.053z M294.623,332.8h-256 c-21.333,0-38.4-17.067-38.4-38.4v-256C0.223,17.067,17.29,0,38.623,0h256c21.333,0,38.4,17.067,38.4,38.4v256 C333.023,315.733,315.956,332.8,294.623,332.8z M38.623,8.533C22.41,8.533,8.756,22.187,8.756,38.4v256 c0,16.213,13.653,29.867,29.867,29.867h256c16.213,0,29.867-13.653,29.867-29.867v-256c0-16.213-13.653-29.867-29.867-29.867H38.623 z M388.49,290.133c-3.413,0-6.827-0.853-10.24-1.707c-15.36-5.973-23.893-23.04-17.92-38.4c2.56-7.68,8.533-13.653,15.36-17.067 c6.827-3.413,15.36-3.413,23.04-0.853c7.68,2.56,13.653,8.533,17.067,15.36c3.413,6.827,3.413,15.36,0.853,23.04 c-2.56,7.68-8.533,13.653-15.36,17.067C397.023,289.28,392.756,290.133,388.49,290.133z M388.49,238.933 c-3.413,0-5.973,0.853-9.387,1.707c-5.12,2.56-9.387,6.827-11.093,11.947s-1.707,11.093,0.853,16.213s6.827,9.387,11.947,11.093 c5.12,1.707,11.093,1.707,16.213-0.853c5.12-2.56,9.387-6.827,11.093-11.947c1.707-5.12,1.707-11.093-0.853-16.213 c-2.56-5.12-6.827-9.387-11.947-11.093l0,0C393.61,238.933,391.05,238.933,388.49,238.933z M251.956,281.6 c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867s29.867,13.653,29.867,29.867S268.17,281.6,251.956,281.6z M251.956,230.4c-11.947,0-21.333,9.387-21.333,21.333c0,11.947,9.387,21.333,21.333,21.333c11.947,0,21.333-9.387,21.333-21.333 C273.29,239.787,263.903,230.4,251.956,230.4z M81.29,281.6c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867 s29.867,13.653,29.867,29.867S97.503,281.6,81.29,281.6z M81.29,230.4c-11.947,0-21.333,9.387-21.333,21.333 c0,11.947,9.387,21.333,21.333,21.333s21.333-9.387,21.333-21.333C102.623,239.787,93.236,230.4,81.29,230.4z M166.623,196.267 c-16.213,0-29.867-13.653-29.867-29.867s13.653-29.867,29.867-29.867s29.867,13.653,29.867,29.867S182.836,196.267,166.623,196.267z M166.623,145.067c-11.947,0-21.333,9.387-21.333,21.333s9.387,21.333,21.333,21.333s21.333-9.387,21.333-21.333 S178.57,145.067,166.623,145.067z M251.956,110.933c-16.213,0-29.867-13.653-29.867-29.867S235.743,51.2,251.956,51.2 s29.867,13.653,29.867,29.867S268.17,110.933,251.956,110.933z M251.956,59.733c-11.947,0-21.333,9.387-21.333,21.333 s9.387,21.333,21.333,21.333c11.947,0,21.333-9.387,21.333-21.333S263.903,59.733,251.956,59.733z M81.29,110.933 c-16.213,0-29.867-13.653-29.867-29.867S65.076,51.2,81.29,51.2s29.867,13.653,29.867,29.867S97.503,110.933,81.29,110.933z M81.29,59.733c-11.947,0-21.333,9.387-21.333,21.333S69.343,102.4,81.29,102.4s21.333-9.387,21.333-21.333 S93.236,59.733,81.29,59.733z"
                      ></path>
                    </g>
                  </svg>
                  <span>x${session?.nb_parties}</span>
                </div>

                <div class="flex items-center space-x-1">
                  <svg
                    fill="#000000"
                    viewBox="0 0 24 24"
                    id="timer-7-second"
                    data-name="Flat Line"
                    xmlns="http://www.w3.org/2000/svg"
                    class="icon flat-line h-5 w-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <circle
                        id="secondary"
                        cx="12"
                        cy="13.5"
                        r="7.5"
                        style="fill: #2ca9bc; stroke-width: 2"
                      ></circle>
                      <polyline
                        id="primary"
                        points="10.6 15.57 12 14 12 10"
                        style="
                          fill: none;
                          stroke: #000000;
                          stroke-linecap: round;
                          stroke-linejoin: round;
                          stroke-width: 2;
                        "
                      ></polyline>
                      <path
                        id="primary-2"
                        data-name="primary"
                        d="M6.7,8.2,5.2,6.7M17.3,8.2l1.5-1.5M12,3V6m3-3H9m3,3a7.5,7.5,0,1,0,7.5,7.5A7.5,7.5,0,0,0,12,6Z"
                        style="
                          fill: none;
                          stroke: #000000;
                          stroke-linecap: round;
                          stroke-linejoin: round;
                          stroke-width: 2;
                        "
                      ></path>
                    </g>
                  </svg>
                  <span>${session?.timer}s</span>
                </div>

                <div class="flex itms-center space-x-1">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-5 w-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M15.5 7.5C15.5 9.433 13.933 11 12 11C10.067 11 8.5 9.433 8.5 7.5C8.5 5.567 10.067 4 12 4C13.933 4 15.5 5.567 15.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M19.5 7.5C19.5 8.88071 18.3807 10 17 10C15.6193 10 14.5 8.88071 14.5 7.5C14.5 6.11929 15.6193 5 17 5C18.3807 5 19.5 6.11929 19.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M4.5 7.5C4.5 8.88071 5.61929 10 7 10C8.38071 10 9.5 8.88071 9.5 7.5C9.5 6.11929 8.38071 5 7 5C5.61929 5 4.5 6.11929 4.5 7.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        d="M18 16.5C18 18.433 15.3137 20 12 20C8.68629 20 6 18.433 6 16.5C6 14.567 8.68629 13 12 13C15.3137 13 18 14.567 18 16.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M22 16.5C22 17.8807 20.2091 19 18 19C15.7909 19 14 17.8807 14 16.5C14 15.1193 15.7909 14 18 14C20.2091 14 22 15.1193 22 16.5Z"
                        fill="#1C274C"
                      ></path>
                      <path
                        opacity="0.4"
                        d="M2 16.5C2 17.8807 3.79086 19 6 19C8.20914 19 10 17.8807 10 16.5C10 15.1193 8.20914 14 6 14C3.79086 14 2 15.1193 2 16.5Z"
                        fill="#1C274C"
                      ></path>
                    </g>
                  </svg>
                  <span>x${session?.nb_players}</span>
                </div>
              </div>

              <div class="text-sm">Joueurs (x2)</div>
            </div>
            <div class="space-y-2 p-2">
              ${session?.players?.map(
                (
                  e
                ) => `<div class="bg-gray-100 rounded flex items-center p-2 space-x-5">
                  <img src="/images/user.png" class="rounded-full h-10" alt="" />
                  <div>${e?.player?.username}</div>
                </div>`
              )}
              
            </div>
            <form class="mt-5" action="#">
              <div class="flex items-center justify-arround space-x-5">
                <button
                  type="submit"
                  class="w-full text-white bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                >
                  Quitter
                </button>

                <button
                  type="submit"
                  class="w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                >
                  Creer
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
        `;
      };
    </script>

    <script>
      socket?.on("session:list", (data) => {
        console.log("list", data);

        let bodyHtml = [];
        let modalHtml = [];
        data?.forEach((e, i) => {
          let elt = $(itemSession(e));
          elt.attr("data-modal-target", `modal-${e?._id}`);
          elt.attr("data-modal-toggle", `modal-${e?._id}`);

          let modelElt = $(itemModal(e));

          bodyHtml.push(elt);
          modalHtml.push(modelElt);
        });
        console.log(modalHtml);

        //$("#styled-profile").append(elt);
        $("#styled-profile").html(bodyHtml);
        $("#modals").html(modalHtml);
      });

      $(document).ready(function () {
        $("#new-session").submit(function (event) {
          event.preventDefault();

          const formData = $(this).serialize();

          console.log("-------", formData);

          $.ajax({
            type: "POST",
            url: "/dice/create",
            data: formData,
            success: function (response) {
              // Code à exécuter si la requête AJAX est un succès
              // console.log(response);
              $("#close-create-session").trigger("click");
            },
            error: function (jqXHR, textStatus, errorThrown) {
              // Code à exécuter si la requête AJAX échoue
              console.log(textStatus, errorThrown);
            },
          });
        });
      });
    </script>
  </body>
</html>
